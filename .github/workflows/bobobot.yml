name: Running bot

on: push
env:
  BOTUN: StereoTwoBot
  BOTKEY: 1114569417:AAG9tQSAgnBd4L1sc40pf4TgrNEjISSocBg
  USERKEY: 1179129272
jobs:
  build:
    runs-on: ubuntu-latest
    timeout-minutes: 525600

    steps:
       - name: Checkout
         uses: actions/checkout@master
         
       - name: Initializing environment
         run: |
            sudo -E apt-get -qq update
            sudo -E apt-get -qq install bc build-essential zip curl libstdc++6 git wget python gcc clang libssl-dev repo rsync flex bison ccache openjdk-8-jdk
       - name: Setup #2
         run: |
            git clone --recurse-submodules https://github.com/JamieHoSzeYui/ErfanGSIs ErfanGSIs
            sudo bash ErfanGSIs/setup.sh
            
       - name: Download BoboBot source
         run: |
            cd ErfanGSIs
            sudo wget https://github.com/VegaBobo/Bot3/releases/download/v0.1/BoboBot.jar
            
         
       - name: Generate values
         run: cd ErfanGSIs &&java -jar BoboBot.jar
         
       - name: Add values
         run: |
             cd ErfanGSIs
             rm -f configs/config.prop
             echo "bot-username=$BOTUN" >> configs/config.prop"
             echo "bot-token=$BOTKEY >> configs/config.prop
             echo "bot-master=$USERKEY >> configs/build.prop"
             
       - name: Run bobobot
         run: cd ErfanGSIs &&java -jar BoboBot.jar
         
            
